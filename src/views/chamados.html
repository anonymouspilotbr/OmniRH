<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sistema de Chamados (OS)</title>
        <script src="https://cdn.tailwindcss.com"></script> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
        <style>
            .bg-gradient-to-r.from-blue-900.to-blue-800.rounded-2xl.p-8.text-white.shadow-xl{
                padding: 1rem;
            }
            .container.mx-auto.px-4.py-8{
                padding-top: 1rem;
                padding-bottom: 1rem;
            }
            div.mb-12{
                margin-bottom: 1rem;
            }
            .table-fixed { table-layout: fixed; }
            .multiline-truncate {
                display: -webkit-box;
                -webkit-line-clamp: 2;
                line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;

                line-height: 1.45;
                max-height: calc(1.45em * 2);

                white-space: normal;
                overflow-wrap: break-word;
            }
        </style>
    </head>
    <body class="bg-gray-50 min-h-screen">
        <header class="bg-sky-600 text-white shadow-lg"> 
            <div class="container mx-auto px-4 py-6"> 
                <div class="flex items-center justify-between"> 
                    <div class="flex items-center space-x-4"> 
                        <button id="menuButton">
                            <i class="fa-solid fa-bars"></i>
                        </button>
                        <div> 
                            <h1 class="text-2xl font-bold">OmniRH</h1> 
                            <p class="text-sky-100 text-sm">Sistema de Ordens de Serviço</p> 
                        </div> 
                    </div> 
                    <div class="flex items-center space-x-4"> 
                        <div class="text-right"> 
                            <p class="font-semibold">Jaime Miranda</p> 
                            <p class="text-sky-200 text-sm">TI - Suporte Técnico</p> 
                        </div> 
                        <div class="w-12 h-12 bg-sky-500 rounded-full flex items-center justify-center"> 
                            <button id="usericon">
                                <i class="fas fa-user text-white text-xl"></i> 
                            </button>
                            <div id="usermenu" class="hidden absolute top-24 right-0 bg-white text-gray-800 rounded-lg shadow-lg w-40">
                                <button class="w-full text-left px-4 py-2 hover:bg-gray-100" onclick="accessPerfil()">Perfil</button>
                                <button class="w-full text-left px-4 py-2 hover:bg-gray-100">Ajuda</button>
                                <button class="w-full text-left px-4 py-2 hover:bg-gray-100" onclick="sair()">Sair</button>
                            </div>
                        </div> 
                    </div> 
                </div> 
            </div> 
        </header>
        <aside id="sidebar" class="fixed top-0 left-0 h-full w-56 bg-sky-600 text-white p-4 space-y-2 transform -translate-x-full transition-transform duration-300 ease-in-out z-50">
            <div class="flex items-center justify-between py-2">
                <h2 class="text-xl font-semibold">OmniRH</h2>
                <button id="closeButton">
                    <i class="fa-solid fa-rectangle-xmark"></i>
                </button>
            </div>
            <button id="menu-inicial" class="text-left px-4 py-2 rounded-lg hover:bg-sky-500 transition"><i class="fa-solid fa-house"></i> Painel principal</button>
            <button id="menu-chamados" class="text-left px-4 py-2 rounded-lg hover:bg-sky-500 transition"><i class="fa-solid fa-bell"></i> Sistema de Chamados</button>
            <button id="menu-empresas" class="text-left px-4 py-2 rounded-lg hover:bg-sky-500 transition"><i class="fa-solid fa-briefcase"></i> Gerenciar Empresas</button>
        </aside>
        <div id="overlay" class="hidden fixed inset-0 bg-black/40 z-40"></div>
        <main class="container mx-auto px-4 py-8">
            <div id="lista-chamados" class="bg-gray-50 rounded-2xl shadow-lg p-6 space-y-4">
                <div class="overflow-x-auto shadow-lg rounded-2xl">
                    <table class="table-auto table-fixed w-full border-collapse shadow-lg rounded-lg">
                        <colgroup>
                            <col style="width: 90px;">
                            <col style="width: 130px;">
                            <col style="width: 140px;">
                            <col style="width: 170px;">
                            <col>
                            <col style="width: 150px;">
                            <col style="width: 160px;">
                        </colgroup>
                        <thead class="bg-gray-100">
                            <tr class="text-center font-bold">
                                <th class="px-4 py-2">Nº OS</th>
                                <th class="px-4 py-2">Data e hora</th>
                                <th class="px-4 py-2">Solicitante</th>
                                <th class="px-4 py-2">Empresa</th>
                                <th class="px-4 py-2 w-2/5 text-center">Descrição</th>
                                <th class="px-4 py-2">Técnico</th>
                                <th class="px-4 py-2">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white text-center border-t">
                                <td class="px-4 py-2">
                                    <span onclick="mostrarDetalhes('106.094')" class="text-blue-600 hover:underline cursor-pointer">
                                        106.094
                                    </span>
                                </td>
                                <td class="px-4 py-2">11/09/2025<br>15:23</td>
                                <td class="px-4 py-2">João Silva</td>
                                <td class="px-4 py-2">ABC Soluções LTDA</td>
                                <td class="px-4 py-2 align-top">
                                    <div class="multiline-truncate text-left">
                                        Não estou conseguindo gerar a folha de ponto dos funcionários.
                                    O sistema está dando erro.
                                    </div>
                                </td>
                                <td class="px-4 py-2">Jaime Miranda</td>
                                <td class="px-4 py-2 text-gray-500">
                                    <i class="fa-solid fa-clock"></i> Em andamento
                                </td>
                            </tr>
                            <tr class="bg-white text-center border-t">
                                <td class="px-4 py-2">106.077</td>
                                <td class="px-4 py-2">11/09/2025<br>12:15</td>
                                <td class="px-4 py-2">Luís Pereira dos Santos</td>
                                <td class="px-4 py-2">ABC Soluções LTDA</td>
                                <td class="px-4 py-2 align-top">
                                    <div class="multiline-truncate text-left">
                                        O sistema não está registrando as horas corretamente. Ontem fiz três horas extras e o sistema registrou apenas 2h. 
                                    </div>
                                </td>
                                <td class="px-4 py-2">Jaime Miranda</td>
                                <td class="px-4 py-2 text-green-600">
                                    <i class="fa-solid fa-check"></i> Concluído
                                </td>
                            </tr>
                            <tr class="bg-white text-center border-t">
                                <td class="px-4 py-2">105.996</td>
                                <td class="px-4 py-2">05/09/2025<br>09:14</td>
                                <td class="px-4 py-2">Osmar Martins</td>
                                <td class="px-4 py-2">DEF Holdings</td>
                                <td class="px-4 py-2 align-top">
                                    <div class="multiline-truncate text-left">
                                        Bom dia, o funcionário Lorem Ipsum está sem acesso ao sistema desde ontem à noite. Quando tento visualizar no sistema, dá "Usuário não encontrado".
                                    </div>
                                </td>
                                <td class="px-4 py-2">Mateus Bittencourt</td>
                                <td class="px-4 py-2 text-gray-500">
                                    <i class="fa-solid fa-clock"></i> Em andamento
                                </td>
                            </tr>
                            <tr class="bg-white text-center border-t">
                                <td class="px-4 py-2">105.894</td>
                                <td class="px-4 py-2">26/08/2025<br>17:44</td>
                                <td class="px-4 py-2">Carolina Maria dos Santos</td>
                                <td class="px-4 py-2">GHI Produções</td>
                                <td class="px-4 py-2 align-top">
                                    <div class="multiline-truncate text-left">
                                        O usuário Rodrigo Joaquim Lopes não está conseguindo resetar sua senha, porque o email de confirmação não chegou.
                                    </div>
                                </td>
                                <td class="px-4 py-2">Marcos Barragan</td>
                                <td class="px-4 py-2 text-green-600">
                                    <i class="fa-solid fa-check"></i> Concluído
                                </td>
                            </tr>
                            <tr class="bg-white text-center border-t">
                                <td class="px-4 py-2">105.572</td>
                                <td class="px-4 py-2">24/08/2025<br>11:16</td>
                                <td class="px-4 py-2">João Silva</td>
                                <td class="px-4 py-2">ABC Soluções LTDA</td>
                                <td class="px-4 py-2 align-top">
                                    <div class="multiline-truncate text-left">
                                        Não estou conseguindo abrir as solicitações de férias dos funcionários, o sistema dá erro. 
                                    </div>
                                </td>
                                <td class="px-4 py-2">-</td>
                                <td class="px-4 py-2 text-yellow-600">
                                    <i class="fa-solid fa-hourglass"></i> Aguardando Triagem
                                </td>
                            </tr>
                            <tr class="bg-white text-center border-t">
                                <td class="px-4 py-2">105.539</td>
                                <td class="px-4 py-2">21/08/2025<br>10:45</td>
                                <td class="px-4 py-2">Lais Martins</td>
                                <td class="px-4 py-2">JKL Empresarial</td>
                                <td class="px-4 py-2 align-top">
                                    <div class="multiline-truncate text-left">
                                        A funcionária Karine Teixeira está sem acesso ao sistema. Está dando erro "Usuário não autorizado"
                                    </div>
                                </td>
                                <td class="px-4 py-2">Jaime Miranda</td>
                                <td class="px-4 py-2 text-green-600">
                                    <i class="fa-solid fa-check"></i> Concluído
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div id="detalhes-os" class="hidden bg-gray-50 rounded-2xl shadow-lg p-6 space-y-4">
                <h2 class="text-xl font-bold mb-4">
                    <i class="fas fa-file-alt text-blue-500 mr-3"></i>
                    Detalhes da OS
                </h2>
                <div id="conteudo-detalhes" class="bg-white shadow-md px-4 py-2 grid grid-cols-3 gap-2">
                    <!-- Aqui o JS vai preencher os detalhes -->
                </div>
                <div id="descricao">
                    <!-- DESCRIÇÃO DA OS -->
                </div>
                <button onclick="voltarLista()" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg">
                    Voltar para lista
                </button>
            </div>
        </main>
        <footer class="bg-gray-800 text-white py-8 mt-12">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h4 class="font-semibold mb-4">OmniRH</h4>
                        <p class="text-gray-400">Gestão eficiente de recursos humanos</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Contato</h4>
                        <p class="text-gray-400">rh@empresa.com</p>
                        <p class="text-gray-400">(11) 9999-9999</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Links Úteis</h4>
                        <a href="#" class="block text-gray-400 hover:text-white mb-2">Política de Recessos</a>
                        <a href="home" class="block text-gray-400 hover:text-white">Portal do Colaborador</a>
                    </div>
                </div>
                <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                    <p>© 2025 OmniRH. Todos os direitos reservados.</p>
                </div>
            </div>
        </footer>
        <script>
            function mostrarDetalhes(numeroOS){
                const detalhes = {
                    "106.094": {
                        dataHora: "11/09/2025 11:23",
                        solicitante: "João Silva",
                        empresa: "ABC Soluções LTDA",
                        descricao: "Não estou conseguindo gerar a folha de ponto dos funcionários. O sistema está dando erro.",
                        tecnico: "Jaime Miranda",
                        status: "Em andamento"
                    }
                };

                let dados = detalhes[numeroOS];

                document.getElementById("conteudo-detalhes").innerHTML = `
                    <div>
                        <p><b>Nº OS:</b> ${numeroOS}</p>
                        <p><b>Data e Hora:</b> ${dados.dataHora}</p>
                    </div>
                    <div>
                        <p><b>Solicitante:</b> ${dados.solicitante}</p>
                        <p><b>Empresa:</b> ${dados.empresa}</p>
                    </div>
                    <div>
                        <p><b>Técnico:</b> ${dados.tecnico}</p>
                        <p><b>Status: </b> <span class="text-gray-500"> <i class="fa-solid fa-clock"></i> ${dados.status}</span></p>
                    </div>
                    <p><b>Descrição:</b> ${dados.descricao}</p>
                `;

                document.getElementById("lista-chamados").classList.add("hidden");
                document.getElementById("detalhes-os").classList.remove("hidden");
            }

            function voltarLista() {
                document.getElementById("detalhes-os").classList.add("hidden");
                document.getElementById("lista-chamados").classList.remove("hidden");
            }

            const userIcon = document.getElementById('usericon');
            const userMenu = document.getElementById('usermenu');

            userIcon.addEventListener('click', () => {
                userMenu.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!userIcon.contains(e.target) && !userMenu.contains(e.target)) {
                    userMenu.classList.add('hidden');
                }
            });

            function accessPerfil(){
                window.location.href = "perfil";
            }
            function sair(){
                window.location.href = "/";
            }
        </script>
        <script src="/js/front.js"></script>
    </body>
</html>