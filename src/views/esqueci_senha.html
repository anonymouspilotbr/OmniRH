<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Resetar a senha</title>
        <script src="https://cdn.tailwindcss.com"></script> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
        <style>
            .bg-gradient-to-r.from-blue-900.to-blue-800.rounded-2xl.p-8.text-white.shadow-xl{
                padding: 1rem;
            }
            .container.mx-auto.px-4.py-8{
                padding-top: 1rem;
                padding-bottom: 1rem;
                border-radius: 16px;
            }
            div.mb-12{
                margin-bottom: 1rem;
            }
            .card-login {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2563eb; 
            padding: 40px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            color: #fff;
            max-width: 500px;
            }

            .login-container {
            display: flex;
            max-width: 1000px;
            margin: 50px auto;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            }
            .card-login {
            flex: 1;
            background: #2563eb;
            color: #fff;
            padding: 40px;
            display: flex;
            align-items: center;
            }

            .card-content {
            width: 100%;
            }

            .card-login h2 {
            font-size: 26px;
            margin-bottom: 10px;
            }

            .card-login p {
            font-size: 14px;
            margin-bottom: 20px;
            opacity: 0.9;
            }

            .card-login label {
            display: block;
            margin-top: 10px;
            font-size: 14px;
            }

            .card-login input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: none;
            border-radius: 8px;
            outline: none;
            }

            .card-login button {
            margin-top: 20px;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 30px;
            background: #fff;
            color: #2563eb;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            }

            .card-login button:hover {
            background: #f1f1f1;
            }
            .card-image {
            flex: 1;
            background: #000;
            }

            .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            }
            .error-box {
            margin-top: 15px;
            background: #fff;
            color: #d90429;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
            text-align: center;
            font-weight: bold;
            }
            .card-login input {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: none;
            border-radius: 8px;
            outline: none;
            color: #000; 
            background: #fff; 
            }

        </style>
    </head>
    <body class="bg-gray-50 min-h-screen">
        <header class="bg-blue-600 text-white shadow-lg"> 
            <div class="container mx-auto px-4 py-6"> 
                <div class="flex items-center justify-between"> 
                    <div class="flex items-center space-x-4"> 
                        <div> 
                            <h1 class="text-2xl font-bold">OmniRH</h1> 
                            <p class="text-blue-100 text-sm">Esqueci minha senha</p> 
                        </div> 
                    </div> 
                    <div class="bg-blue-400 rounded-2xl px-4"> 
                        <div class="text-right"> 
                            <a href="#" class="font-semibold">Fazer Login</a> 
                        </div> 
                    </div> 
                </div> 
            </div> 
        </header>
        <main class="container mx-auto px-4 py-8">
            <div class="login-container">
                <div class="card-login">
                    <div class="card-content">
                    <h2>Esqueci minha senha</h2>
                    <p>Digite seu email para enviar um link para redefinir a senha</p>
                    <form id="forgot-form">  
                        <label for="usuario">Email</label>
                        <input type="email" id="email" placeholder="Digite seu email" required>

                        <div id="erro-login" class="error-box" style="display: none;">
                        Usuário inválido.
                        </div>
                        <button type="submit">Enviar</button>
                    </form>
                    </div>
                </div>
                <div class="card-image">
                    <img src="https://picsum.photos/600/600" alt="Imagem Login">
                </div>
            </div>
        </main>
        <footer class="bg-gray-800 text-white py-8 mt-12">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div>
                        <h4 class="font-semibold mb-4">OmniRH</h4>
                        <p class="text-gray-400">Gestão eficiente de recursos humanos</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Contato</h4>
                        <p class="text-gray-400">rh@empresa.com</p>
                        <p class="text-gray-400">(11) 9999-9999</p>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-4">Links Úteis</h4>
                        <a href="#" class="block text-gray-400 hover:text-white mb-2">Política de Recessos</a>
                        <a href="#" class="block text-gray-400 hover:text-white">Portal do Colaborador</a>
                    </div>
                </div>
                <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                    <p>© 2025 OmniRH. Todos os direitos reservados.</p>
                </div>
            </div>
        </footer>
    </body>
    <script>
        document.getElementById("forgot-form").addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const errorBox = document.getElementById("erro-login");

            try {
                const res = await fetch("/auth/forgot-password", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({ email })
                });

                const data = await res.json();

                if (!res.ok) throw new Error(data.error || "Erro ao enviar o e-mail");

                alert("Um link de recuperação foi enviado para o seu e-mail.");
                errorBox.style.display = "none";
            } catch (err) {
                errorBox.style.display = "block";
                errorBox.textContent = err.message;
            }
        });
    </script>
</html>
